# ============================================
# Speedstein Worker Environment Variables
# ============================================
# Copy this file to .dev.vars for local development
# For production, set these via: wrangler secret put VARIABLE_NAME

# ============================================
# SUPABASE CONFIGURATION (REQUIRED)
# ============================================
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Note: SUPABASE_ANON_KEY is NOT needed for worker (only for client-side)
# Worker uses SERVICE_ROLE_KEY to bypass Row Level Security

# ============================================
# DODOPAYMENTS (REQUIRED FOR BILLING)
# ============================================
# Get these from: DodoPayments Dashboard
DODO_API_KEY=your-dodo-api-key
DODO_WEBHOOK_SECRET=your-webhook-secret

# ============================================
# CLOUDFLARE BINDINGS (Configured in wrangler.toml)
# ============================================
# These are automatically injected by Cloudflare Workers runtime
# You DON'T need to set these as environment variables

# BROWSER - Cloudflare Browser Rendering API binding
#   Purpose: Chromium instance for PDF generation
#   Configured in: wrangler.toml [browser] section

# RATE_LIMIT_KV - KV namespace for rate limiting
#   Purpose: Track API request rates per user
#   Configured in: wrangler.toml [[kv_namespaces]] section
#   Dev ID: 22a4d1624e4848ed9fdcc541bcf7ab39

# PDF_STORAGE - R2 bucket for PDF storage
#   Purpose: Store generated PDFs with tier-based lifecycle
#   Configured in: wrangler.toml [[r2_buckets]] section
#   Bucket: speedstein-pdfs-dev (dev), speedstein-pdfs (prod)

# BROWSER_POOL_DO - Durable Objects binding for browser pooling
#   Purpose: Stateful browser session management
#   Configured in: wrangler.toml [[durable_objects.bindings]] section
#   Class: BrowserPoolDO

# ============================================
# OPTIONAL FEATURE FLAGS
# ============================================
# Uncomment to override defaults

# Enable or disable Durable Objects routing (default: true)
# Set to 'false' to use SimpleBrowserService (per-request browser)
# ENABLE_DURABLE_OBJECTS=true

# ============================================
# LOCAL DEVELOPMENT ONLY (R2 Access)
# ============================================
# Only needed if testing R2 operations locally without wrangler dev
# Get these from: Cloudflare Dashboard → R2 → Manage R2 API Tokens

# R2_ACCESS_KEY_ID=your_r2_access_key_id
# R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
# R2_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com

# ============================================
# DEPLOYMENT INSTRUCTIONS
# ============================================
#
# LOCAL DEVELOPMENT:
# 1. Copy this file: cp .env.example .dev.vars
# 2. Fill in SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY
# 3. Run: pnpm run dev
# 4. For local Supabase: SUPABASE_URL=http://localhost:54321
#
# PRODUCTION DEPLOYMENT:
# 1. Set secrets via wrangler:
#    wrangler secret put SUPABASE_URL
#    wrangler secret put SUPABASE_SERVICE_ROLE_KEY
#    wrangler secret put DODO_API_KEY
#    wrangler secret put DODO_WEBHOOK_SECRET
# 2. Verify bindings in wrangler.toml
# 3. Deploy: pnpm run deploy
#
# SECURITY NOTES:
# - NEVER commit .dev.vars to version control (.gitignore includes it)
# - NEVER expose SERVICE_ROLE_KEY in client-side code
# - Rotate API keys regularly (Supabase settings)
# - Use separate Supabase projects for dev/staging/production
